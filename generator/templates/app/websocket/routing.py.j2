"""
WebSocket routing configuration for {{ project.name }}

Generated by Django Enhanced Generator on {{ now().strftime('%Y-%m-%d %H:%M:%S') }}.
"""
from channels.auth import AuthMiddlewareStack
from channels.routing import ProtocolTypeRouter, URLRouter
from channels.security.websocket import AllowedHostsOriginValidator
from django.core.asgi import get_asgi_application
from django.urls import path, re_path

# Import WebSocket consumers
{% for app in apps %}
{% if app.websocket_consumers %}
from apps.{{ app.name }}.consumers import {% for consumer in app.websocket_consumers %}{{ consumer.name }}{% if not loop.last %}, {% endif %}{% endfor %}
{% endif %}
{% endfor %}

# WebSocket URL patterns
websocket_urlpatterns = [
    {% for app in apps %}
    {% if app.websocket_consumers %}
    # {{ app.name }} WebSocket routes
    {% for consumer in app.websocket_consumers %}
        {{ consumer.route_type|default('path') }}('{{ consumer.route }}', {{ consumer.name }}.as_asgi()),
{% endfor %}
{% endif %}
{% endfor %}
]

# Channel routing
application = ProtocolTypeRouter({
    'http': get_asgi_application(),
    'websocket': AllowedHostsOriginValidator(
        AuthMiddlewareStack(
            URLRouter(websocket_urlpatterns)
        )
    ),
})